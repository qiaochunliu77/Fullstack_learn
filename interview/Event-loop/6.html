<script>
    async function foo() {
        await bar();
        console.log(1);
    }
    async function bar() {
        console.log(0)
        Promise.resolve(3).then(console.log)
        return new Promise((resolve, reject) => {
            console.log(2)
            setTimeout(() => { resolve() })
        })
    }
    Promise.resolve(4).then(console.log)
    foo()
    // [set]
    // [p4 cons1 p3]
    // 0 2 4 3 1
</script>